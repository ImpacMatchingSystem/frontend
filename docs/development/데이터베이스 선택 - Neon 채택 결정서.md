# ImpacMatching 데이터베이스 선택: Neon 채택 결정서

## 📋 개요

**프로젝트**: ImpacMatching - B2B 행사 참가기업과 바이어 간 1:1 미팅 매칭 서비스  
**결정 사항**: 데이터베이스 솔루션으로 Neon PostgreSQL 채택  
**결정 일자**: 2025년 8월  
**작성자**: 박종권

## 🎯 선택 배경

ImpacMatching은 행사 기간 중 집중적인 트래픽이 발생하는 특성을 가진 서비스입니다. 참가기업과 바이어 간의 미팅 예약 시스템이라는 핵심 기능의 특성상, 데이터 일관성과 동시성 처리가 매우 중요합니다.

### 주요 고려사항
- **가변적 트래픽 패턴**: 행사 기간에만 집중적 사용
- **동시성 처리**: 같은 시간대 중복 예약 방지 필수
- **확장성**: 행사 규모에 따른 유연한 확장 필요
- **비용 효율성**: 스타트업 단계의 예산 제약
- **개발 생산성**: 빠른 개발과 안정적인 운영

## 🔍 대안 분석

### 검토된 솔루션들

#### 1. Supabase (기존 선택지)
**장점**
- 풀스택 BaaS 솔루션
- 실시간 기능 내장
- 통합 인증 시스템
- 무료 플랜 제공

**단점**
- 제한적인 자동 스케일링
- 고부하 상황에서 성능 한계
- 불필요한 기능으로 인한 복잡성
- 서비스 의존성 증가

#### 2. PlanetScale
**장점**
- MySQL 기반 서버리스
- 브랜치 기능 제공
- 좋은 성능

**단점**
- MySQL 생태계 제약
- 상대적으로 높은 가격
- PostgreSQL 대비 기능 제한

#### 3. **Neon (선택)** ⭐
**장점**
- 진정한 서버리스 PostgreSQL
- 뛰어난 수평 확장성
- 자동 스케일링
- PostgreSQL 완전 호환
- 브랜치 기능
- 경쟁력 있는 가격

**단점**
- 상대적으로 새로운 서비스
- 실시간 기능 별도 구현 필요

## 📊 기술적 비교 분석

### 확장성 비교
| 항목 | Neon | Supabase | PlanetScale |
|------|------|----------|-------------|
| 자동 스케일링 | **우수** | 제한적 | 좋음 |
| 수평 확장 | **최고** | 보통 | 좋음 |
| 피크 대응 | **최적** | 한계 존재 | 좋음 |

### 성능 비교
| 메트릭 | Neon | Supabase | PlanetScale |
|--------|------|----------|-------------|
| 지연시간 | **최소** | 보통 | 낮음 |
| 동시 연결 | **높음** | 제한적 | 높음 |
| 처리량 | **우수** | 보통 | 좋음 |

### 비용 효율성
| 사용량 | Neon | Supabase | PlanetScale |
|--------|------|----------|-------------|
| 무료 플랜 | 512MB | 500MB | 1GB |
| 소규모 | $19/월 | $25/월 | $29/월 |
| 확장 시 | **경제적** | 보통 | 비싸짐 |

## 🚀 Neon 선택의 결정적 요인

### 1. 뛰어난 서버리스 아키텍처
```sql
-- 자동 확장으로 인프라 관리 불필요
-- 행사 기간 트래픽 급증 시 자동 대응
-- 사용하지 않을 때 자동 절전 모드
```

### 2. PostgreSQL 완전 호환성
```typescript
// Prisma ORM과 완벽한 호환
// 복잡한 트랜잭션 처리 가능
// 동시성 제어 우수
await prisma.$transaction(async (tx) => {
  // 안전한 미팅 예약 처리
  const meeting = await tx.meeting.create({...})
  return meeting
})
```

### 3. 개발자 경험 최적화
- **브랜치 기능**: 각 PR마다 별도 DB 환경
- **시간 여행**: 특정 시점으로 롤백 가능
- **포인트 인 타임 복구**: 데이터 손실 방지
- **자동 백업**: 운영 부담 최소화

### 4. ImpacMatching 워크플로우 최적화
```
행사 전: 최소 리소스 (비용 절약)
    ↓
행사 당일: 자동 확장 (성능 보장)
    ↓
행사 후: 자동 축소 (비용 최적화)
```

## 📈 예상 시나리오별 성능

### 시나리오 1: 소규모 행사 (참가자 200명)
- **동시 접속**: 50명
- **Neon 대응**: 무료 플랜으로도 충분
- **비용**: $0/월

### 시나리오 2: 중규모 행사 (참가자 1,000명)
- **동시 접속**: 250명
- **Neon 대응**: 자동 스케일업, 안정적 서비스
- **비용**: $19/월

### 시나리오 3: 대규모 행사 (참가자 5,000명)
- **동시 접속**: 1,000명+
- **Neon 대응**: 수평 확장으로 원활한 처리
- **비용**: $69/월 (행사 기간만)

## 🔧 기술 스택 통합성

### Next.js + Neon 조합의 이점
```typescript
Frontend: Next.js 14 (App Router)
Backend: Next.js API Routes
Database: Neon PostgreSQL
ORM: Prisma
Auth: NextAuth.js
Deployment: Vercel
```

### 대안 대비 우위점
- **복잡성 제거**: Supabase 대비 단순한 구조
- **성능 최적화**: DB에만 집중된 최적화
- **유지보수성**: 의존성 최소화
- **확장성**: 서버리스 특성으로 무한 확장

## 💰 비용 분석

### 연간 비용 예측 (중규모 행사 기준)
```
Neon PostgreSQL:
- 평상시: $0 (무료 플랜)
- 행사 기간: $19 × 3개월 = $57
- 연간 총비용: $57

Supabase 대안:
- 연간 고정: $25 × 12 = $300
- 추가 기능 비용: $100
- 연간 총비용: $400

절약 효과: $343/년 (85% 절약)
```

## ⚠️ 리스크 및 대응방안

### 식별된 리스크
1. **서비스 초기 단계**: 상대적으로 새로운 서비스
2. **실시간 기능**: 별도 구현 필요
3. **커뮤니티 규모**: Supabase 대비 작은 커뮤니티

### 대응 방안
1. **백업 계획**: PostgreSQL 표준이므로 쉬운 마이그레이션
2. **실시간 구현**: Server-Sent Events로 대체
3. **지원**: Neon 공식 지원 채널 활용

## 🎯 결론

ImpacMatching의 특성과 요구사항을 종합적으로 고려한 결과, **Neon PostgreSQL이 최적의 선택**임을 확인했습니다.

### 핵심 선택 이유
1. **확장성**: 행사별 가변 트래픽에 완벽 대응
2. **성능**: 동시성 처리와 지연시간 최적화
3. **경제성**: 사용량 기반 과금으로 비용 최적화
4. **생산성**: Next.js와의 완벽한 조합
5. **안정성**: PostgreSQL 기반의 검증된 기술

### 기대 효과
- **개발 속도 향상**: 단순한 아키텍처로 빠른 개발
- **운영 비용 절감**: 85% 비용 절약 효과
- **성능 최적화**: 피크 시간 안정적 서비스
- **확장 용이성**: 서비스 성장에 따른 자연스러운 확장

**최종 결정**: ImpacMatching 프로젝트의 데이터베이스 솔루션으로 **Neon PostgreSQL을 채택**합니다.
