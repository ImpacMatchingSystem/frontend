name: Issue Automation
on:
  issues:
    types: [opened]

jobs:
  auto-label:
    runs-on: ubuntu-latest
    steps:
      - name: Auto label based on title
        uses: actions/github-script@v6
        with:
          script: |
            const title = context.payload.issue.title;
            const labels = [];

            // 제목에 따른 자동 라벨링 (6개 타입만)
            if (title.includes('🎁새기능')) {
              labels.push('🎁 새기능');
            } else if (title.includes('🛠개선')) {
              labels.push('🛠 개선');
            } else if (title.includes('🐛오류')) {
              labels.push('🐛 오류');
            } else if (title.includes('🎨리팩토링')) {
              labels.push('🎨 리팩토링');
            } else if (title.includes('📝문서')) {
              labels.push('📝 문서');
            } else if (title.includes('🚀배포')) {
              labels.push('🚀 배포');
            }

            if (labels.length > 0) {
              await github.rest.issues.addLabels({
                owner: context.repo.owner,
                repo: context.repo.repo,
                issue_number: context.payload.issue.number,
                labels: labels
              });
            }
